# v2.22å®Ÿè£…ã‚µãƒãƒªãƒ¼ - ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šUIå…¨é¢åˆ·æ–°

**å®Ÿè£…æ—¥**: 2026-01-22  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.22 (ä¸€è¦§è¡¨ç¤º + views.pushç‰ˆ)  
**å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.2 (è¤‡æ•°ã‚°ãƒ«ãƒ¼ãƒ—ä¸€æ‹¬ç®¡ç†ç‰ˆ)  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Ÿè£…å®Œäº†

---

## ğŸ“‹ å®Ÿè£…å®Œäº†é …ç›®

### 1. ä»•æ§˜æ›¸
- âœ… `docs/spec_v2.22.md` - ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šUIå…¨é¢åˆ·æ–°ã®å®Œå…¨ãªä»•æ§˜

### 2. UIå±¤ï¼ˆmodal_views.pyï¼‰
- âœ… `create_admin_settings_modal()` - ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šï¼ˆä¸€è¦§è¡¨ç¤ºï¼‰
- âœ… `create_add_group_modal()` - ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«
- âœ… `create_edit_group_modal()` - ã‚°ãƒ«ãƒ¼ãƒ—ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
- âœ… `create_delete_confirm_modal()` - å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«

### 3. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å±¤ï¼ˆaction_handlers.pyï¼‰
- âœ… `handle_report_admin_command()` - ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ `/report-admin`
- âœ… `handle_add_new_group_button()` - è¿½åŠ ãƒœã‚¿ãƒ³æŠ¼ä¸‹
- âœ… `handle_group_overflow_menu()` - ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆ...ï¼‰æŠ¼ä¸‹

### 4. ã‚µãƒ–ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å±¤ï¼ˆmodal_handlers.pyï¼‰
- âœ… `register_modal_handlers_v22()` - v2.22å°‚ç”¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²é–¢æ•°
- âœ… `handle_admin_settings_submission()` - ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šä¿å­˜
- âœ… `handle_add_group_submission()` - ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ ä¿å­˜
- âœ… `handle_edit_group_submission()` - ã‚°ãƒ«ãƒ¼ãƒ—ç·¨é›†ä¿å­˜
- âœ… `handle_delete_confirm_submission()` - ã‚°ãƒ«ãƒ¼ãƒ—å‰Šé™¤å®Ÿè¡Œ
- âœ… `_update_parent_admin_modal()` - è¦ªãƒ¢ãƒ¼ãƒ€ãƒ«æ›´æ–°ãƒ˜ãƒ«ãƒ‘ãƒ¼

### 5. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸çµ±åˆï¼ˆhandlers/__init__.pyï¼‰
- âœ… `register_all_handlers()` ã« `register_modal_handlers_v22()` ã‚’è¿½åŠ 

### 6. æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ•´ç†
- âœ… v2.2ã®å¤ã„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
  - `handle_settings_v2_shortcut` â†’ `handle_settings_v2_shortcut_deprecated`
  - `handle_add_group_button` â†’ `handle_add_group_button_deprecated`
  - `handle_member_settings_v2_save` â†’ `handle_member_settings_v2_save_deprecated`

---

## ğŸ¯ å®Ÿè£…ã—ãŸä¸»è¦æ©Ÿèƒ½

### 1. ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ `/report-admin`

```python
@app.command("/report-admin")
def handle_report_admin_command(ack, body, client):
    """ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆä¸€è¦§ï¼‰ã‚’é–‹ãã¾ã™"""
    # WorkspaceServiceã¨GroupServiceã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
    # create_admin_settings_modal() ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ç”Ÿæˆ
    # views.open() ã§è¡¨ç¤º
```

**å‹•ä½œ**:
- `/report-admin` ã‚’å…¥åŠ›
- ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆä¸€è¦§ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- é€šçŸ¥å…ˆã¨ã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### 2. ä¸€è¦§è¡¨ç¤ºUI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¬ãƒãƒ¼ãƒˆé€šçŸ¥å…ˆ                   â”‚
â”‚ [@user1 @user2]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ *1èª²*                      ...  â”‚
â”‚ @user3, @user4                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ *2èª²*                      ...  â”‚
â”‚ @user5, @user6                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â• æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’è¿½åŠ    [è¿½åŠ ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹å¾´**:
- ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆ...ï¼‰
- ãƒ¡ãƒ³ãƒãƒ¼ã¯ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å½¢å¼ã§è¡¨ç¤ºï¼ˆ`<@U12345>`ï¼‰
- ã‚°ãƒ«ãƒ¼ãƒ—ãŒ0ä»¶ã®å ´åˆã¯ã€Œã¾ã ã‚°ãƒ«ãƒ¼ãƒ—ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€

### 3. views.pushã«ã‚ˆã‚‹ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ãƒƒã‚¯

```
â‘ ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šï¼ˆä¸€è¦§ï¼‰
  â†“ views.push
â‘¡è¿½åŠ /ç·¨é›†/å‰Šé™¤ãƒ¢ãƒ¼ãƒ€ãƒ«
  â†“ ä¿å­˜/æ›´æ–°/å‰Šé™¤
â‘ ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šï¼ˆä¸€è¦§ï¼‰â† views.update ã§æœ€æ–°ãƒ‡ãƒ¼ã‚¿åæ˜ 
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã§è‡ªå‹•çš„ã«å‰ã®ç”»é¢ã«æˆ»ã‚‹
- å…¥åŠ›å€¤ã®ä¿æŒãŒä¸è¦ï¼ˆå„ãƒ¢ãƒ¼ãƒ€ãƒ«ã¯ç‹¬ç«‹ï¼‰
- ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«

### 4. ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆ...ï¼‰

```python
# action_value ã®å½¢å¼:
# - "edit_{group_id}" â†’ ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’push
# - "delete_{group_id}" â†’ å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’push

action_type, group_id = action_value.split("_", 1)
if action_type == "edit":
    # ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
elif action_type == "delete":
    # å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
```

### 5. è¦ªãƒ¢ãƒ¼ãƒ€ãƒ«ã®è‡ªå‹•æ›´æ–°

```python
def _update_parent_admin_modal(client, view_id, workspace_id):
    """å­ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ã®æ“ä½œå®Œäº†å¾Œã€è¦ªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°"""
    # æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    admin_ids = workspace_service.get_admin_ids(workspace_id)
    groups = group_service.get_all_groups(workspace_id)
    
    # ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å†ç”Ÿæˆ
    view = create_admin_settings_modal(admin_ids, groups)
    
    # views.update ã§æ›´æ–°
    client.views_update(view_id=view_id, view=view)
```

**ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ å¾Œ
- ã‚°ãƒ«ãƒ¼ãƒ—ç·¨é›†å¾Œ
- ã‚°ãƒ«ãƒ¼ãƒ—å‰Šé™¤å¾Œ

---

## ğŸ“Š å‡¦ç†ãƒ•ãƒ­ãƒ¼

### A. åˆå›è¡¨ç¤º

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ /report-admin
  â†’ handle_report_admin_command()
    â†’ WorkspaceService.get_admin_ids()
    â†’ GroupService.get_all_groups()
    â†’ create_admin_settings_modal()
    â†’ views.open()
  â†’ â‘ ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
```

### B. ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ 

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ è¿½åŠ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
  â†’ handle_add_new_group_button()
    â†’ create_add_group_modal()
    â†’ views.push()
  â†’ â‘¡è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º

ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ ä¿å­˜ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
  â†’ handle_add_group_submission()
    â†’ GroupService.create_group()
    â†’ _update_parent_admin_modal()
      â†’ views.update(parent_view_id)
  â†’ â‘ ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«æ›´æ–°ï¼ˆæ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ãŒè¡¨ç¤ºï¼‰
```

### C. ã‚°ãƒ«ãƒ¼ãƒ—ç·¨é›†

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ ...ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ç·¨é›†
  â†’ handle_group_overflow_menu()
    â†’ action_value = "edit_{group_id}"
    â†’ GroupService.get_group_by_id()
    â†’ create_edit_group_modal()
    â†’ views.push()
  â†’ â‘¢ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º

ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ æ›´æ–°ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
  â†’ handle_edit_group_submission()
    â†’ GroupService.update_group_members()
    â†’ _update_parent_admin_modal()
  â†’ â‘ ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«æ›´æ–°
```

### D. ã‚°ãƒ«ãƒ¼ãƒ—å‰Šé™¤

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ ...ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ å‰Šé™¤
  â†’ handle_group_overflow_menu()
    â†’ action_value = "delete_{group_id}"
    â†’ GroupService.get_group_by_id()
    â†’ create_delete_confirm_modal()
    â†’ views.push()
  â†’ â‘£å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º

ãƒ¦ãƒ¼ã‚¶ãƒ¼
  â†’ å‰Šé™¤ã™ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
  â†’ handle_delete_confirm_submission()
    â†’ Firestore.delete()
    â†’ _update_parent_admin_modal()
  â†’ â‘ ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«æ›´æ–°ï¼ˆå‰Šé™¤ã•ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—ãŒæ¶ˆãˆã‚‹ï¼‰
```

---

## ğŸ” é‡è¦ãªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ

### 1. private_metadataã§ã®ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—

**ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«**:
```python
"private_metadata": json.dumps({"group_id": group_id})
```

**å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«**:
```python
"private_metadata": json.dumps({
    "group_id": group_id,
    "group_name": group_name
})
```

**ã‚µãƒ–ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§å–å¾—**:
```python
metadata = json.loads(view.get("private_metadata", "{}"))
group_id = metadata.get("group_id")
```

### 2. previous_view_idã®ä½¿ç”¨

```python
# views.pushã§è¡¨ç¤ºã—ãŸå­ãƒ¢ãƒ¼ãƒ€ãƒ«ã‹ã‚‰è¦ªãƒ¢ãƒ¼ãƒ€ãƒ«ã®view_idã‚’å–å¾—
parent_view_id = body["view"]["previous_view_id"]

# è¦ªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’æ›´æ–°
_update_parent_admin_modal(client, parent_view_id, workspace_id)
```

### 3. ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰

```python
# action_idã«é€£ç•ªãŒä»˜ããŸã‚ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
@app.action("group_actions_*")
def handle_group_overflow_menu(ack, body, client):
    # action_value ã‹ã‚‰ edit/delete ã¨ group_id ã‚’å–å¾—
    action_value = body["actions"][0]["selected_option"]["value"]
    action_type, group_id = action_value.split("_", 1)
```

### 4. ã‚°ãƒ«ãƒ¼ãƒ—ãŒ0ä»¶ã®å ´åˆã®è¡¨ç¤º

```python
if not groups:
    blocks.append({
        "type": "section",
        "text": {"type": "mrkdwn", "text": "_ã¾ã ã‚°ãƒ«ãƒ¼ãƒ—ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“_"}
    })
```

---

## ğŸ“ ã‚³ãƒ¼ãƒ‰çµ±è¨ˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | è¿½åŠ è¡Œæ•° | å¤‰æ›´å†…å®¹ |
|---------|---------|---------|
| `docs/spec_v2.22.md` | +1000 | ä»•æ§˜æ›¸ä½œæˆ |
| `resources/views/modal_views.py` | +250 | 4ã¤ã®æ–°ãƒ¢ãƒ¼ãƒ€ãƒ«ç”Ÿæˆé–¢æ•° |
| `resources/handlers/action_handlers.py` | +120 | ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã€2ã¤ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ |
| `resources/handlers/modal_handlers.py` | +200 | 4ã¤ã®ã‚µãƒ–ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° |
| `resources/handlers/__init__.py` | +3 | v2.22ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ² |
| **åˆè¨ˆ** | **~1573è¡Œ** | **5ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´** |

---

## âœ… v2.2ã‹ã‚‰ã®å¤‰æ›´ã‚µãƒãƒªãƒ¼

### å»ƒæ­¢ã—ãŸæ©Ÿèƒ½

1. **è¤‡æ•°ã‚°ãƒ«ãƒ¼ãƒ—åŒæ™‚ç·¨é›†**: `create_member_settings_modal_v2()`
2. **å‹•çš„ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ **: `handle_add_group_button()` (views.updateæ–¹å¼)
3. **ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆèµ·å‹•**: `@app.shortcut("open_member_setup_modal")`
4. **v2.2ã®ã‚µãƒ–ãƒŸãƒƒã‚·ãƒ§ãƒ³**: `@app.view("member_settings_v2")`

### è¿½åŠ ã—ãŸæ©Ÿèƒ½

1. **ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰**: `/report-admin`
2. **ä¸€è¦§è¡¨ç¤ºUI**: ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä¸€è¦§ã§è¡¨ç¤º
3. **ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼**: `...` ã‹ã‚‰ç·¨é›†/å‰Šé™¤
4. **views.push**: ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ç®¡ç†
5. **å€‹åˆ¥ç·¨é›†/å‰Šé™¤ãƒ¢ãƒ¼ãƒ€ãƒ«**: å„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’å€‹åˆ¥ã«æ“ä½œ

### ç¶­æŒã—ãŸæ©Ÿèƒ½

1. **ãƒ‡ãƒ¼ã‚¿æ§‹é€ **: Firestoreã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ ã¯åŒã˜
2. **GroupService**: æ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãã®ã¾ã¾ä½¿ç”¨
3. **WorkspaceService**: æ—¢å­˜ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãã®ã¾ã¾ä½¿ç”¨

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### 1. Slack Appã®è¨­å®š

Slack Appã®Settings â†’ Slash Commandsã§ä»¥ä¸‹ã‚’ç™»éŒ²ï¼š

- **Command**: `/report-admin`
- **Request URL**: `https://your-app.run.app/slack/events`
- **Short Description**: ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šã‚’ç®¡ç†
- **Usage Hint**: ï¼ˆç©ºæ¬„ï¼‰

### 2. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ

```bash
# ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
export SLACK_BOT_TOKEN="xoxb-..."
export SLACK_SIGNING_SECRET="..."
export GOOGLE_APPLICATION_CREDENTIALS="path/to/serviceAccountKey.json"

# ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
python resources/main.py

# ngrokã§ãƒˆãƒ³ãƒãƒ«ä½œæˆ
ngrok http 3000
```

### 3. å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆé …ç›®

#### åŸºæœ¬æ©Ÿèƒ½
- [ ] `/report-admin` ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] é€šçŸ¥å…ˆãŒåˆæœŸè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ—¢å­˜ã‚°ãƒ«ãƒ¼ãƒ—ãŒä¸€è¦§è¡¨ç¤ºã•ã‚Œã‚‹

#### ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ 
- [ ] ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ã§è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚°ãƒ«ãƒ¼ãƒ—åã‚’å…¥åŠ›ã—ã¦ä¿å­˜ã§ãã‚‹
- [ ] ä¿å­˜å¾Œã€ä¸€è¦§ã«æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹

#### ã‚°ãƒ«ãƒ¼ãƒ—ç·¨é›†
- [ ] `...` ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œç·¨é›†ã€ã‚’é¸æŠã§ãã‚‹
- [ ] ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã§æ—¢å­˜ã®ã‚°ãƒ«ãƒ¼ãƒ—åã¨ãƒ¡ãƒ³ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚°ãƒ«ãƒ¼ãƒ—åã‚„ãƒ¡ãƒ³ãƒãƒ¼ã‚’å¤‰æ›´ã—ã¦æ›´æ–°ã§ãã‚‹
- [ ] æ›´æ–°å¾Œã€ä¸€è¦§ã«å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹

#### ã‚°ãƒ«ãƒ¼ãƒ—å‰Šé™¤
- [ ] `...` ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œå‰Šé™¤ã€ã‚’é¸æŠã§ãã‚‹
- [ ] å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã€Œå‰Šé™¤ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã§ã‚°ãƒ«ãƒ¼ãƒ—ãŒå‰Šé™¤ã•ã‚Œã‚‹
- [ ] å‰Šé™¤å¾Œã€ä¸€è¦§ã‹ã‚‰ã‚°ãƒ«ãƒ¼ãƒ—ãŒæ¶ˆãˆã‚‹

#### é€šçŸ¥å…ˆä¿å­˜
- [ ] é€šçŸ¥å…ˆã‚’é¸æŠã—ã¦ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã§ãã‚‹
- [ ] Firestoreã«ä¿å­˜ã•ã‚Œã‚‹
- [ ] æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆã§ä½¿ç”¨ã•ã‚Œã‚‹

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ã‚°ãƒ«ãƒ¼ãƒ—åãŒç©ºã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å­˜åœ¨ã—ãªã„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ç·¨é›†ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

### 4. ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Google Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run deploy slack-attendance-bot \
  --source . \
  --region asia-northeast1 \
  --allow-unauthenticated
```

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [spec_v2.22.md](./spec_v2.22.md) - v2.22ã®æŠ€è¡“ä»•æ§˜æ›¸ï¼ˆæœ€æ–°ï¼‰
- [spec_v2.2.md](./spec_v2.2.md) - v2.2ã®æŠ€è¡“ä»•æ§˜æ›¸ï¼ˆå‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
- [v2.2_data_fix_summary.md](./v2.2_data_fix_summary.md) - v2.2ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ä¿®æ­£
- [spec_v1.1.md](./spec_v1.1.md) - v1.1ã®æŠ€è¡“ä»•æ§˜æ›¸ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç‰ˆï¼‰

---

## âœ¨ ã¾ã¨ã‚

v2.22ã®å®Ÿè£…ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®æ”¹å–„ãŒå®Ÿç¾ã—ã¾ã—ãŸï¼š

1. **ç›´æ„Ÿçš„ãªUI**: ä¸€è¦§è¡¨ç¤ºã§å…¨ä½“ã‚’æŠŠæ¡ã—ã‚„ã™ã„
2. **æ˜ç¤ºçš„ãªæ“ä½œ**: ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ç·¨é›†/å‰Šé™¤ã‚’é¸æŠ
3. **ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…**: views.pushã§è‡ªå‹•çš„ã«å‰ã®ç”»é¢ã«æˆ»ã‚‹
4. **ä¿å®ˆæ€§å‘ä¸Š**: å„ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒç‹¬ç«‹ã—ã¦ãŠã‚Šã€ã‚³ãƒ¼ãƒ‰ãŒæ˜ç¢º
5. **ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰**: `/report-admin` ã§æ˜ç¤ºçš„ã«ã‚¢ã‚¯ã‚»ã‚¹

ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒªãƒ³ã‚¿ãƒ¼ã‚¨ãƒ©ãƒ¼ãªã—ã§å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼ğŸ‰

**å®Ÿè£…å®Œäº†æ—¥**: 2026-01-22  
**ä½œæˆè€…**: AI Assistant (Claude Sonnet 4.5)  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Ÿè£…å®Œäº†ã€ãƒ†ã‚¹ãƒˆå¾…ã¡
